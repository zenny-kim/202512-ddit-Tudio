<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<!DOCTYPE html>
<html>
<head>
<title>Tudio - 자주 묻는 질문</title>
<%-- 공통 코드 포함 --%>
<jsp:include page="../include/common.jsp" />

<style>
/* --- 1:1 문의(inquiryList)와 동일한 레이아웃 CSS --- */
body {
    background-color: #f8f9fa;
    font-family: 'Pretendard', sans-serif;
    padding-top: var(--header-height);
}

/* 사이드바 우측 본문 영역 설정 (1:1 문의와 동일) */
.main-content {
    margin-left: var(--sidebar-width) !important;
    width: calc(100% - var(--sidebar-width));
    padding: 40px 20px;
}

/* 본문 중앙 정렬 박스 (1:1 문의와 동일하게 1000px로 수정) */
.main-content .container {
    margin-left: auto !important;
    margin-right: auto !important;
    max-width: 1000px; /* 기존 900px에서 1000px로 변경 */
    width: 100%;
}

/* 카드 스타일 (1:1 문의와 동일한 클래스명 사용 예정) */
.card {
    border: none;
    border-radius: 15px;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
    background-color: #ffffff;
}

/* Breadcrumb 스타일 */
.breadcrumb {
    font-size: 0.9rem;
    margin-bottom: 30px;
}

/* --- 여기서부터는 내부 아코디언(FAQ) 전용 디자인 (세련된 스타일 유지) --- */

/* 아코디언 아이템 스타일 */
.accordion-item {
    border: none;
    border-bottom: 1px solid #f1f3f5;
    background: transparent;
}

.accordion-item:last-child {
    border-bottom: none;
}

/* 질문 버튼 (헤더) */
.accordion-button {
    padding: 20px 10px; /* 상하 패딩 약간 조절 */
    font-size: 1.0rem;
    font-weight: 500; /* 1:1 문의 리스트와 폰트 두께감을 맞춤 */
    color: #333;
    background-color: transparent;
    box-shadow: none !important;
}

/* 질문 버튼 활성화 시 */
.accordion-button:not(.collapsed) {
    color: #007bff;
    background-color: transparent;
    font-weight: 600;
}

.accordion-button::after {
    background-size: 1rem;
    opacity: 0.5;
    transition: all 0.3s ease;
}

/* 답변 영역 */
.accordion-body {
    padding: 20px 15px 30px 45px; /* Q아이콘 위치 고려하여 왼쪽 여백 줌 */
    background-color: #fcfcfc;
    border-radius: 12px;
    color: #555;
    line-height: 1.6;
    font-size: 0.95rem;
    margin-bottom: 15px;
}

/* Q 아이콘 */
.q-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    background-color: #e7f5ff;
    color: #007bff;
    border-radius: 50%;
    font-size: 12px;
    font-weight: bold;
    margin-right: 12px;
    flex-shrink: 0;
}
</style>
</head>
<body>
    <%-- 헤더 포함 --%>
    <jsp:include page="../include/headerUser.jsp" />

    <div class="d-flex border-top" style="min-height: calc(100vh - 60px);">
        
        <%-- 사이드바 포함 --%>
        <jsp:include page="../include/sidebarCs.jsp">
            <jsp:param name="menu" value="faq" />
        </jsp:include>

        <div class="main-content flex-grow-1">
            <div class="container">
                
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item text-muted">고객센터</li>
                        <li class="breadcrumb-item active fw-bold" aria-current="page">자주 묻는 질문</li>
                    </ol>
                </nav>

                <div class="d-flex justify-content-between align-items-end mb-4">
                    <div class="d-flex flex-column">
                        <h3 class="fw-bold m-0">
                            <i class="bi bi-question-circle me-2"></i>자주 묻는 질문 (FAQ)
                        </h3>
                         <p class="text-muted mt-2 mb-0 small">
                            Tudio 이용 중 가장 궁금해하시는 내용을 모았습니다.
                        </p>
                    </div>
                </div>

                <div class="card p-4">
                    
                    <div class="accordion" id="faqAccordion">
                        <c:choose>
                            <c:when test="${not empty faqList}">
                                <c:forEach items="${faqList}" var="faq" varStatus="status">
                                	<c:if test="${faq.publicStatus eq  'Y'}">
	                                    <div class="accordion-item">
	                                        <h2 class="accordion-header" id="heading${status.index}">
	                                            <button class="accordion-button collapsed" type="button" 
	                                                    data-bs-toggle="collapse" 
	                                                    data-bs-target="#collapse${status.index}" 
	                                                    aria-expanded="false" 
	                                                    aria-controls="collapse${status.index}">
	                                                <span class="q-icon">Q</span>
	                                                ${faq.faqTitle}
	                                            </button>
	                                        </h2>
	                                        <div id="collapse${status.index}" class="accordion-collapse collapse" 
	                                             aria-labelledby="heading${status.index}" 
	                                             data-bs-parent="#faqAccordion">
	                                            <div class="accordion-body">
	                                                <c:out value="${faq.faqContent}" escapeXml="false" />
	                                            </div>
	                                        </div>
	                                    </div>
                                	</c:if>
                                </c:forEach>
                            </c:when>
                            
                            <c:otherwise>
                                <div class="text-center py-5">
                                    <i class="bi bi-exclamation-circle text-muted fs-1"></i>
                                    <p class="text-muted mt-3">등록된 자주 묻는 질문이 없습니다.</p>
                                </div>
                            </c:otherwise>
                        </c:choose>
                    </div> 
                    
                    <div class="d-flex justify-content-center mt-4">
                        ${pagingVO.pagingHTML}
                    </div>

                </div> </div>
        </div>
    </div>

    <%-- 푸터 포함 --%>
    <jsp:include page="../include/footer.jsp" />

</body>
</html>