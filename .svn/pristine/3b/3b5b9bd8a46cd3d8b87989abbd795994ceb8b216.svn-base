<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tudio 로그인</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="${pageContext.request.contextPath}/css/member.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="login-container shadow">
        <h2 class="text-center login-title">Tudio</h2>

        <form action="${pageContext.request.contextPath}/login" method="POST">
            <div class="mb-3">
                <label for="username" class="form-label fw-bold">아이디</label>
                <input type="text" class="form-control login-input" id="username" name="username" placeholder="아이디를 입력하세요" required>
            </div>
            <div class="mb-4">
                <label for="password" class="form-label fw-bold">비밀번호</label>
                <input type="password" class="form-control login-input" id="password" name="password" placeholder="비밀번호를 입력하세요" required>
                <div class="error-msg text-danger small mt-1" style="height: 20px;"></div>
            </div>
            
            <div class="d-grid gap-2 mb-3">
                <button type="submit" class="btn btn-primary btn-lg">로그인</button>
            </div>

            <div class="d-flex justify-content-center mb-3">
                <a href="${pageContext.request.contextPath}/tudio/findMemberId" class="text-decoration-none text-muted small mx-2">아이디 찾기</a>
                <span class="text-muted small">|</span>
                <a href="${pageContext.request.contextPath}/tudio/findMemberPw" class="text-decoration-none text-muted small mx-2">비밀번호 찾기</a>
            </div>

            <hr class="my-4">
            
            <div class="text-center">
                <p class="text-muted small">아직 계정이 없으신가요?</p>
                <button type="button" class="btn btn-outline-secondary w-100" 
                        onclick="location.href='${pageContext.request.contextPath}/tudio/memberSignup'">회원가입</button>
            </div>
        </form>
    </div>
</body>
<script>
$(function() {
    // 요소를 변수에 담기
    let $loginInput = $(".login-input"); 	// 아이디, 비번 입력창들
    let $error = $(".error-msg");         	// 에러 메시지 영역
    let $signForm = $("#signForm");      	// 폼 객체

    $loginInput.on("keydown click", function(event) {
        
        // 1. 기존 에러 메시지 초기화
        $error.html("");
        
        // 2. CapsLock 핸들링 (비밀번호 입력 시 유용)
        // originalEvent를 통해 브라우저 순수 이벤트 객체에 접근합니다.
        if (event.originalEvent && typeof event.originalEvent.getModifierState === "function") {
            if (event.originalEvent.getModifierState("CapsLock")) {
                $error.html("⚠️ CapsLock이 켜져 있습니다.");
            }
        }
        
        // 3. Enter 키 감지 (Enter 키 번호는 13)
        if (event.which === 13) {
            $signForm.submit();
        }
    });
});
</script>
</html>