import{r,j as e,a as k,l as T,L as M,W as P,Y as z,Z as B}from"./common.chunk.js";const Y=({refreshTrigger:i})=>{const[c,m]=r.useState([]),[h,p]=r.useState(""),[j,l]=r.useState(""),[v,o]=r.useState([]),[w,S]=r.useState(!0),s=()=>{const d=new Date,N=d.getTimezoneOffset()*6e4;return new Date(d-N).toISOString().split("T")[0]},a=r.useCallback(d=>{const N=new Date,D=new Date(N);D.setDate(N.getDate()-N.getDay());const E=[],A=["Ïùº","Ïõî","Ìôî","Ïàò","Î™©","Í∏à","ÌÜ†"];for(let R=0;R<7;R++){const n=new Date(D);n.setDate(D.getDate()+R);const t=n.getFullYear(),u=String(n.getMonth()+1).padStart(2,"0"),g=String(n.getDate()).padStart(2,"0"),x=`${t}-${u}-${g}`,C=d.find($=>$.WORK_DATE_STR===x),O=C?C.DAILY_COUNT:0;E.push({dateStr:x,dayNum:g,dayName:A[R],count:O})}o(E)},[]),f=async(d=!1)=>{try{const N=await k.get("/tudio/dashboard/personalWork"),{list:D,titleRange:E}=N.data;m(D||[]),p(E),a(D||[]),d&&l(s())}catch(N){console.error("Í∞úÏù∏ÏóÖÎ¨¥ Î°úÎìú Ïã§Ìå®",N)}finally{S(!1)}};r.useEffect(()=>{f(!0)},[]),r.useEffect(()=>{i>0&&(console.log("‚ôªÔ∏è [Í∞úÏù∏ÏóÖÎ¨¥] Í∞±Ïã† Ïã†Ìò∏ ÏàòÏã† -> Ïû¨Ï°∞Ìöå"),f(!1))},[i]);const b=c.filter(d=>d.WORK_DATE_STR===j),y=d=>{window.location.href=`/tudio/project/detail?projectNo=${d.PROJECT_NO}&taskId=${d.WORK_ID}`};return w?e.jsx("div",{className:"text-center py-4",children:e.jsx("span",{className:"spinner-border spinner-border-sm text-primary"})}):e.jsxs("div",{className:"widget-box p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("h6",{className:"fw-bold m-0 text-dark",children:[e.jsx("i",{className:"bi bi-calendar-check text-primary me-2"}),"Í∞úÏù∏ ÏóÖÎ¨¥"]}),e.jsx("span",{className:"badge bg-light text-secondary border",children:h})]}),e.jsx("div",{className:"d-flex justify-content-between text-center bg-light rounded p-2 mb-3",children:v.map((d,N)=>{const D=j===d.dateStr,E=N===0?"text-danger":N===6?"text-primary":"text-dark";return e.jsxs("div",{onClick:()=>l(d.dateStr),className:`calendar-day-box flex-fill p-1 rounded cursor-pointer position-relative ${D?"bg-white shadow-sm border border-primary":""}`,children:[e.jsx("div",{className:`small ${N===0||N===6?E:"text-muted"}`,style:{fontSize:"0.7rem"},children:d.dayName}),e.jsx("div",{className:`fw-bold mt-1 ${E}`,children:d.dayNum}),d.count>0&&e.jsx("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",style:{fontSize:"0.5rem",transform:"translate(-50%, 50%)"},children:d.count})]},d.dateStr)})}),e.jsxs("div",{className:"flex-grow-1 overflow-auto custom-scrollbar",children:[e.jsxs("h6",{className:"small text-muted border-bottom pb-2 mb-2",children:["üìÖ ",j," (",b.length,"Í±¥)"]}),b.length===0?e.jsx("div",{className:"text-center text-muted py-4 small",children:"ÏòàÏ†ïÎêú ÏóÖÎ¨¥Í∞Ä ÏóÜÏäµÎãàÎã§."}):e.jsx("ul",{className:"list-group list-group-flush",children:b.map((d,N)=>e.jsxs("li",{className:"list-group-item px-0 py-2 border-0 d-flex align-items-center list-group-item-action",onClick:()=>y(d),style:{cursor:"pointer"},children:[e.jsx("span",{className:`badge me-2 ${d.WORK_TYPE==="TASK"?"bg-primary":"bg-info"}`,children:d.WORK_TYPE==="TASK"?"ÏÉÅÏúÑ":"ÌïòÏúÑ"}),e.jsx("div",{className:"text-truncate flex-grow-1 small fw-bold text-dark",children:d.WORK_TITLE}),e.jsx("span",{className:"badge bg-light text-secondary border ms-2",children:d.WORK_STATUS})]},N))})]})]})},I=({refreshTrigger:i})=>{const[c,m]=r.useState({stats:{waiting:0,progress:0,done:0,reject:0},myDrafts:[],toApprove:[],isAdmin:!1}),[h,p]=r.useState(!0),[j,l]=r.useState("MY"),v=async()=>{try{const a=(await k.get("/tudio/dashboard/approval/data")).data||{};m({stats:a.stats||{waiting:0,progress:0,done:0,reject:0},myDrafts:a.myDrafts||[],toApprove:a.toApprove||[],isAdmin:!!a.isAdmin}),a.isAdmin&&h&&l("AUTH")}catch(s){console.error("Í≤∞Ïû¨ Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïã§Ìå®",s)}finally{p(!1)}};r.useEffect(()=>{v()},[]),r.useEffect(()=>{i>0&&(console.log("‚ôªÔ∏è [Ï†ÑÏûêÍ≤∞Ïû¨] Í∞±Ïã† Ïã†Ìò∏ ÏàòÏã† -> Ïû¨Ï°∞Ìöå"),v())},[i]);const o=s=>{window.location.href=`/tudio/approval/detail?docNo=${s}`},w=s=>{switch(s){case"PENDING":return e.jsx("span",{className:"badge bg-warning text-dark",children:"ÎåÄÍ∏∞"});case"PROGRESS":return e.jsx("span",{className:"badge bg-primary",children:"ÏßÑÌñâ"});case"APPROVED":return e.jsx("span",{className:"badge bg-success",children:"ÏäπÏù∏"});case"REJECTED":return e.jsx("span",{className:"badge bg-secondary",children:"Î∞òÎ†§"});default:return e.jsx("span",{className:"badge bg-secondary",children:s})}};if(h)return e.jsx("div",{className:"text-center py-4",children:e.jsx("span",{className:"spinner-border spinner-border-sm text-primary"})});const S=j==="MY"?c.myDrafts:c.toApprove;return e.jsxs("div",{className:"widget-content d-flex flex-column",style:{height:"100%",overflow:"hidden"},children:[e.jsxs("div",{className:"p-3 border-bottom d-flex justify-content-between align-items-center",children:[e.jsxs("h6",{className:"fw-bold m-0 text-dark",children:[e.jsx("i",{className:"bi bi-file-earmark-check-fill me-2 text-success"}),"Ï†ÑÏûêÍ≤∞Ïû¨"]}),c.isAdmin&&e.jsxs("div",{className:"btn-group btn-group-sm",children:[e.jsx("button",{className:`btn btn-sm ${j==="MY"?"btn-primary":"btn-light text-secondary border"}`,style:{fontSize:"0.7rem",padding:"2px 8px"},onClick:()=>l("MY"),children:"ÎÇ¥ Í∏∞Ïïà"}),e.jsx("button",{className:`btn btn-sm ${j==="AUTH"?"btn-danger":"btn-light text-secondary border"}`,style:{fontSize:"0.7rem",padding:"2px 8px"},onClick:()=>l("AUTH"),children:"Í≤∞Ïû¨ ÎåÄÍ∏∞"})]})]}),e.jsxs("div",{className:"d-flex border-bottom text-center py-2 bg-light small",children:[e.jsxs("div",{className:"flex-fill border-end",children:[e.jsx("span",{className:"text-muted d-block",style:{fontSize:"0.7rem"},children:"ÎåÄÍ∏∞"}),e.jsx("strong",{className:"text-warning",children:c.stats.waiting})]}),e.jsxs("div",{className:"flex-fill border-end",children:[e.jsx("span",{className:"text-muted d-block",style:{fontSize:"0.7rem"},children:"ÏßÑÌñâ"}),e.jsx("strong",{className:"text-primary",children:c.stats.progress})]}),e.jsxs("div",{className:"flex-fill border-end",children:[e.jsx("span",{className:"text-muted d-block",style:{fontSize:"0.7rem"},children:"Î∞òÎ†§"}),e.jsx("strong",{className:"text-secondary",children:c.stats.reject})]}),e.jsxs("div",{className:"flex-fill",children:[e.jsx("span",{className:"text-muted d-block",style:{fontSize:"0.7rem"},children:"ÏäπÏù∏"}),e.jsx("strong",{className:"text-success",children:c.stats.done})]})]}),e.jsx("div",{className:"flex-grow-1 overflow-auto custom-scrollbar p-0",children:e.jsx("ul",{className:"list-group list-group-flush",children:S.length===0?e.jsx("div",{className:"d-flex align-items-center justify-content-center h-100 text-muted small py-4",children:j==="MY"?"ÏßÑÌñâ Ï§ëÏù∏ Í∏∞ÏïàÏù¥ ÏóÜÏäµÎãàÎã§.":"Í≤∞Ïû¨Ìï† Î¨∏ÏÑúÍ∞Ä ÏóÜÏäµÎãàÎã§."}):S.map((s,a)=>e.jsxs("li",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center py-2 px-3 border-bottom-0",onClick:()=>o(s.docNo||s.documentNo),style:{cursor:"pointer"},children:[e.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[e.jsxs("div",{className:"fw-bold text-dark text-truncate d-flex align-items-center",style:{fontSize:"0.85rem"},children:[j==="AUTH"&&e.jsx("span",{className:"badge bg-danger-subtle text-danger me-1",style:{fontSize:"0.6rem"},children:"ÏöîÏ≤≠"}),s.docTitle||s.documentTitle]}),e.jsxs("div",{className:"text-muted",style:{fontSize:"0.7rem"},children:[s.docDate?new Date(s.docDate).toLocaleDateString():"-",j==="AUTH"&&s.drafterName&&e.jsxs("span",{className:"ms-1",children:["| ",s.drafterName]})]})]}),e.jsx("div",{children:w(s.docStatus||s.documentStatus)})]},a))})}),e.jsx("div",{className:"p-2 border-top text-center bg-white",children:e.jsxs("a",{href:"/tudio/approval/list",className:"text-decoration-none text-secondary small fw-bold",children:["ÎçîÎ≥¥Í∏∞ ",e.jsx("i",{className:"bi bi-chevron-right",style:{fontSize:"0.7rem"}})]})})]})},K=({refreshTrigger:i})=>{const[c,m]=r.useState([]),[h,p]=r.useState("ALL"),[j,l]=r.useState({total:0,unread:0});r.useEffect(()=>{v()},[]),r.useEffect(()=>{i>0&&(console.log("‚ôªÔ∏è Alerm Î¶¨Ïä§Ìä∏ Í∞±Ïã†"),v())},[i]);const v=async()=>{try{const a=(await k.get("/tudio/dashboard/alarm")).data;m(a),a.length>0?l({total:a[0].totalCount,unread:a[0].unreadCount}):l({total:0,unread:0})}catch(s){console.error("ÏïåÎ¶º Î°úÎìú Ïã§Ìå®",s)}},o=()=>h==="UNREAD"?c.filter(s=>s.isRead==="N"):h==="READ"?c.filter(s=>s.isRead==="Y"):c,w=async(s,a)=>{const f=a==="Y"?"N":"Y";try{await k.post("/api/dashboard/alarm/status",{notiNo:s,status:f}),v()}catch(b){console.error("ÏÉÅÌÉú Î≥ÄÍ≤Ω Ïã§Ìå®",b)}},S=async s=>{if((await T.fire({title:"ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"ÏÇ≠Ï†ú",cancelButtonText:"Ï∑®ÏÜå",customClass:{popup:"small-swal"}})).isConfirmed)try{await k.post("/api/dashboard/alarm/delete",{notiNo:s}),m(c.filter(f=>f.notiNo!==s)),v()}catch{T.fire("Ïã§Ìå®","ÏÇ≠Ï†ú Ï§ë Ïò§Î•ò Î∞úÏÉù","error")}};return e.jsxs("div",{className:"widget-content",children:[e.jsxs("div",{className:"p-3 border-bottom",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsxs("h6",{className:"fw-bold m-0",children:[e.jsx("i",{className:"bi bi-bell-fill me-2"}),"ÏïåÎ¶º"]}),e.jsxs("div",{className:"d-flex gap-1",children:[e.jsxs("span",{className:"badge bg-light text-secondary border",children:["Ï†ÑÏ≤¥ ",j.total]}),e.jsxs("span",{className:"badge bg-danger",children:["ÏïàÏùΩÏùå ",j.unread]})]})]}),e.jsx("ul",{className:"nav nav-pills nav-fill small gap-1 p-1 bg-light rounded",children:["ALL","UNREAD","READ"].map(s=>e.jsx("li",{className:"nav-item cursor-pointer flex-fill",children:e.jsx("a",{className:`nav-link py-1 ${h===s?"active bg-white text-dark shadow-sm":""}`,onClick:()=>p(s),children:s==="ALL"?"Ï†ÑÏ≤¥":s==="UNREAD"?"ÏïàÏùΩÏùå":"ÏùΩÏùå"})},s))})]}),e.jsx("div",{className:"flex-grow-1 overflow-auto custom-scrollbar p-0",children:o().length===0?e.jsx("div",{className:"text-center text-muted py-5 small",children:"ÏïåÎ¶ºÏù¥ ÏóÜÏäµÎãàÎã§."}):e.jsx("ul",{className:"list-group list-group-flush",children:o().map(s=>e.jsxs("li",{className:`list-group-item list-group-item-action py-3 px-3 border-bottom-0 noti-list ${s.isRead==="N"?"bg-red-50":""}`,children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-1",children:[e.jsxs("div",{className:"text-truncate small",style:{maxWidth:"85%"},children:[s.projectName&&e.jsxs("span",{className:`fw-bold me-1 ${s.projectName==="Í≥µÏßÄÏÇ¨Ìï≠"?"text-danger":"text-primary"}`,children:["[",s.projectName,"]"]}),e.jsxs("span",{className:"text-muted",children:["From. ",s.senderId]})]}),e.jsx("small",{className:"text-muted",style:{fontSize:"0.7rem"},children:new Date(s.notiRegdate).toLocaleDateString()})]}),e.jsx("div",{className:`mb-2 small ${s.isRead==="N"?"fw-bold text-dark":"text-secondary"}`,children:s.notiMessage}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx("button",{className:"btn btn-xs btn-outline-secondary",onClick:()=>w(s.notiNo,s.isRead),title:s.isRead==="Y"?"ÏïàÏùΩÏùå Ï≤òÎ¶¨":"ÏùΩÏùå Ï≤òÎ¶¨",children:e.jsx("i",{className:`bi ${s.isRead==="Y"?"bi-envelope":"bi-envelope-open"}`})}),e.jsx("button",{className:"btn btn-xs btn-outline-danger",onClick:()=>S(s.notiNo),children:e.jsx("i",{className:"bi bi-trash"})})]})]},s.notiNo))})})]})},W=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:i=>{i.addEventListener("mouseenter",Swal.stopTimer),i.addEventListener("mouseleave",Swal.resumeTimer)}}),_=({onProjectSelect:i,refreshTrigger:c})=>{const[m,h]=r.useState([]),[p,j]=r.useState(!0);r.useEffect(()=>{l()},[]),r.useEffect(()=>{c>0&&(console.log("‚ôªÔ∏è ÏÜåÏºì Ïã†Ìò∏ Í∞êÏßÄ: Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ®"),l())},[c]);const l=async()=>{try{const a=await k.get("/tudio/dashboard/bookmark/list");h(a.data)}catch(a){console.error("Î∂ÅÎßàÌÅ¨ Î°úÎìú Ïã§Ìå®",a)}finally{j(!1)}},v=async(a,f)=>{a.stopPropagation();const b=[...m];h(b.filter(y=>y.projectNo!==f));try{const y=await k.post("/tudio/project/bookmark",{projectNo:f});if(y.data&&y.data.status==="SUCCESS")W.fire({icon:"success",title:"Î∂ÅÎßàÌÅ¨Í∞Ä Ìï¥Ï†úÎêòÏóàÏäµÎãàÎã§."}),console.log("Î∂ÅÎßàÌÅ¨ Ìï¥Ï†ú ÏôÑÎ£å");else throw new Error("Server returned status: "+(y.data?y.data.status:"Unknown"))}catch(y){console.error("Î∂ÅÎßàÌÅ¨ Î≥ÄÍ≤Ω Ïã§Ìå®",y),h(b),W.fire({icon:"error",title:"Î∂ÅÎßàÌÅ¨ Î≥ÄÍ≤Ω Ïã§Ìå®"})}},o=a=>{if(!a)return"-";const f=new Date(a),b=String(f.getFullYear()).slice(-2),y=String(f.getMonth()+1).padStart(2,"0"),d=String(f.getDate()).padStart(2,"0");return`${b}.${y}.${d}`},w=(a,f)=>{const b=Number(a)||0,y=Number(f)||0;return b===0?0:Math.round(y/b*100)},S=(a,f)=>{if(!a||!f)return 0;const b=new Date(a).getTime(),y=new Date(f).getTime(),d=new Date().getTime(),N=y-b,D=d-b;if(N<=0)return 100;if(D<0)return 0;const E=Math.round(D/N*100);return E>100?100:E},s=a=>a===1?e.jsx("span",{className:"badge bg-success",children:"ÏôÑÎ£å"}):a===2?e.jsx("span",{className:"badge bg-secondary",children:"Ï§ëÎã®"}):e.jsx("span",{className:"badge bg-primary",children:"ÏßÑÌñâ"});return e.jsxs("div",{className:"widget-content",children:[e.jsxs("div",{className:"p-3 border-bottom d-flex justify-content-between align-items-center",children:[e.jsxs("h6",{className:"fw-bold m-0 text-dark",children:[e.jsx("i",{className:"bi bi-bookmark-star-fill text-info me-2"}),"Î∂ÅÎßàÌÅ¨ ÌîÑÎ°úÏ†ùÌä∏"]}),e.jsx("span",{className:"badge bg-light text-secondary border",children:m.length})]}),e.jsx("div",{className:"flex-grow-1 overflow-auto custom-scrollbar",children:p?e.jsxs("div",{className:"d-flex justify-content-center align-items-center h-100 text-muted",children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"})," Î°úÎî©Ï§ë..."]}):m.length===0?e.jsxs("div",{className:"text-center text-muted py-5 small",children:[e.jsx("i",{className:"bi bi-star d-block fs-3 mb-2 opacity-50"}),"Î∂ÅÎßàÌÅ¨Ìïú ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÏóÜÏäµÎãàÎã§."]}):e.jsx("ul",{className:"list-group list-group-flush gap-1",children:m.map(a=>{const f=w(a.myTotalTaskCount,a.myDoneTaskCount),b=S(a.projectStartdate,a.projectEnddate);return e.jsxs("li",{className:"list-group-item list-group-item-action px-3 d-flex cursor-pointer",onClick:()=>i(a.projectNo),children:[e.jsx("div",{className:"px-3 border-end d-flex align-items-start",style:{width:"40%",minWidth:"0"},children:e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("button",{className:"btn btn-link p-0 text-warning border-0",style:{lineHeight:0},onClick:y=>v(y,a.projectNo),title:"Î∂ÅÎßàÌÅ¨ Ìï¥Ï†ú",children:e.jsx("i",{className:"bi bi-star-fill fs-6"})}),e.jsx("div",{className:"fw-bold text-dark text-truncate",title:a.projectName,style:{fontSize:"0.85rem"},children:a.projectName}),e.jsx("div",{children:s(a.projectStatus)})]})}),e.jsxs("div",{className:"d-flex flex-column gap-1",style:{flex:"1"},children:[e.jsxs("div",{className:"px-3 border-end d-flex flex-column justify-content-center",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-end mb-1",style:{fontSize:"0.7rem"},children:[e.jsx("span",{className:"text-primary fw-bold",children:"ÎÇ¥ ÏóÖÎ¨¥"}),e.jsxs("span",{className:"fw-bold",children:[f,"% ",e.jsxs("span",{className:"text-muted fw-light",children:["(",a.myDoneTaskCount,"/",a.myTotalTaskCount,")"]})]})]}),e.jsx("div",{className:"progress",style:{height:"6px",backgroundColor:"#e9ecef"},children:e.jsx("div",{className:"progress-bar bg-primary",style:{width:`${f}%`}})})]}),e.jsxs("div",{className:"px-3 d-flex flex-column justify-content-center",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-end mb-1",style:{fontSize:"0.7rem"},children:[e.jsx("span",{className:"text-primary fw-bold",children:"ÌîÑÎ°úÏ†ùÌä∏ ÏßÑÏ≤ôÎèÑ"}),e.jsxs("span",{className:"text-secondary",children:[b,"%"]})]}),e.jsx("div",{className:"progress mb-1",style:{height:"4px",backgroundColor:"#f1f3f5"},children:e.jsx("div",{className:"progress-bar bg-secondary opacity-50",style:{width:`${b}%`}})}),e.jsxs("div",{className:"text-muted text-end",style:{fontSize:"0.65rem",whiteSpace:"nowrap",letterSpacing:"-0.5px"},children:[o(a.projectStartdate)," ~ ",o(a.projectEnddate)]})]})]})]},a.projectNo)})})})]})},L=T.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:i=>{i.addEventListener("mouseenter",T.stopTimer),i.addEventListener("mouseleave",T.resumeTimer)}}),U=({projectNo:i,refreshTrigger:c})=>{const[m,h]=r.useState([]),[p,j]=r.useState(!1),[l,v]=r.useState(!1),[o,w]=r.useState(""),[S,s]=r.useState(null),[a,f]=r.useState(""),b=r.useRef(null),y=r.useRef(null);r.useEffect(()=>{d(),v(!1),s(null)},[i]),r.useEffect(()=>{c>0&&(console.log("‚ôªÔ∏è [TodoWidget] Í∞±Ïã† Ïã†Ìò∏ ÏàòÏã†"),d())},[c]),r.useEffect(()=>{l&&b.current&&b.current.focus()},[l]),r.useEffect(()=>{S&&y.current&&y.current.focus()},[S]);const d=async()=>{try{const n=await k.get("/tudio/dashboard/todo/list",{params:{projectNo:i||0}});h(n.data||[])}catch(n){console.error("Ìà¨Îëê Î°úÎìú Ïã§Ìå®",n)}finally{j(!1)}},N=async()=>{if(!o.trim()){T.fire({icon:"warning",title:"ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.",toast:!0,position:"top-end",timer:1500,showConfirmButton:!1});return}try{(await k.post("/tudio/dashboard/todo/insert",{todoContent:o,projectNo:i||0})).data==="OK"?(L.fire({icon:"success",title:"Ìï† ÏùºÏù¥ Îì±Î°ùÎêòÏóàÏäµÎãàÎã§."}),w(""),d(),b.current&&b.current.focus()):T.fire("Ïã§Ìå®","Îì±Î°ùÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.","error")}catch(n){console.error("Îì±Î°ù ÏóêÎü¨",n),T.fire("ÏóêÎü¨","ÏÑúÎ≤Ñ ÌÜµÏã† Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.","error")}},D=async n=>{const t=n.todoStatus==="Y"?"N":"Y",u=[...m];h(m.map(g=>g.todoNo===n.todoNo?{...g,todoStatus:t}:g));try{const g=await k.post("/tudio/dashboard/todo/updateStatus",{todoNo:n.todoNo,todoStatus:t});if(console.log(g.data),g.status===200&&g.data==="OK")console.log("‚úÖ ÏÑ±Í≥µ");else throw new Error("DB ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìå® (0Í±¥ ÏàòÏ†ïÎê®)")}catch(g){h(u),console.error("ÏÉÅÌÉú Î≥ÄÍ≤Ω Ïã§Ìå®",g),T.fire("Ïò§Î•ò","ÏÉÅÌÉú Î≥ÄÍ≤Ω Ïã§Ìå®","error")}},E=async n=>{if((await T.fire({title:"Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?",text:"ÏÇ≠Ï†úÎêú Îç∞Ïù¥ÌÑ∞Îäî Î≥µÍµ¨Ìï† Ïàò ÏóÜÏäµÎãàÎã§.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"ÎÑ§, ÏÇ≠Ï†úÌï©ÎãàÎã§",cancelButtonText:"Ï∑®ÏÜå",customClass:{popup:"small-swal"}})).isConfirmed)try{(await k.post("/tudio/dashboard/todo/delete",{todoNo:n})).data==="OK"?(L.fire({icon:"success",title:"ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§."}),h(m.filter(g=>g.todoNo!==n))):T.fire("Ïò§Î•ò","ÏÇ≠Ï†ú Ïã§Ìå®","error")}catch{T.fire("Ïò§Î•ò","ÏÑúÎ≤Ñ ÌÜµÏã† Ïã§Ìå®","error")}},A=n=>{s(n.todoNo),f(n.todoContent)},R=async()=>{if(!a.trim()){T.fire({icon:"warning",title:"ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî."});return}try{(await k.post("/tudio/dashboard/todo/updateContent",{todoNo:S,todoContent:a})).data==="OK"?(L.fire({icon:"success",title:"ÏàòÏ†ï ÏôÑÎ£å"}),h(m.map(t=>t.todoNo===S?{...t,todoContent:a}:t)),s(null)):T.fire("Ïã§Ìå®","ÏàòÏ†ï Ïã§Ìå®","error")}catch(n){console.error("ÏàòÏ†ï Ïã§Ìå®",n)}};return e.jsxs("div",{className:"widget-content zen-folder-widget bg-white d-flex flex-column rounded shadow-sm position-relative",style:{height:"100%",width:"100%",overflow:"hidden"},children:[e.jsxs("div",{className:"folder-shape-layer",style:{position:"absolute",inset:0,zIndex:0},children:[e.jsx("div",{className:"folder-tab-todo"}),e.jsx("div",{className:"folder-body-bg"})]}),e.jsxs("div",{className:"folder-content-layer d-flex flex-column h-100 position-relative",style:{zIndex:1,paddingLeft:"6px"},children:[e.jsx("div",{className:"widget-header-wrapper",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center widget-header-custom",children:[e.jsxs("h6",{className:"font-weight-bold m-0 text-gray-800",style:{padding:"14px 20px"},children:[e.jsx("i",{className:"bi bi-check2-square text-primary me-2"}),"To Do List",i>0&&e.jsxs("span",{className:"ms-2 badge bg-primary rounded-pill",children:["Prj.",i]})]}),e.jsx("button",{className:"btn btn-sm btn-white shadow-sm border rounded-circle d-flex align-items-center justify-content-center",onClick:()=>v(!l),title:"Ìï† Ïùº Ï∂îÍ∞Ä",style:{width:"32px",height:"32px",backgroud:"#fff"},children:e.jsx("i",{className:`bi ${l?"bi-x-lg text-danger":"bi-plus-lg text-primary fw-bold"}`})})]})}),l&&e.jsx("div",{className:"px-3 mb-2 animate-fade-in",children:e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center bg-light border rounded p-2",children:[e.jsx("div",{className:"d-flex align-items-center w-100 me-2",children:e.jsx("input",{type:"text",ref:b,className:"form-control form-control-sm",placeholder:"Ìï† Ïùº Ï∂îÍ∞Ä",value:o,onChange:n=>w(n.target.value),onKeyDown:n=>{n.key==="Enter"&&N(),n.key==="Escape"&&v(!1)}})}),e.jsxs("div",{className:"d-flex",style:{minWidth:"100px"},children:[e.jsx("button",{className:"btn btn-sm btn-success me-1",onClick:N,children:"Ï∂îÍ∞Ä"}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>v(!1),children:"Ï∑®ÏÜå"})]})]})}),e.jsx("div",{className:"flex-grow-1 overflow-auto custom-scrollbar px-0",id:`todo-list-area-${i}`,style:{minHeight:0},children:p?e.jsx("div",{className:"text-center py-4 text-muted small",children:"Î°úÎî©Ï§ë..."}):m.length===0?e.jsx("div",{className:"text-center py-5 text-muted small",children:"Îì±Î°ùÎêú Ìï† ÏùºÏù¥ ÏóÜÏäµÎãàÎã§."}):e.jsx("ul",{className:"list-group list-group-flush",children:m.map(n=>e.jsxs("li",{className:"list-group-item px-3 py-2 border-bottom-0 d-flex align-items-center group-hover-target",onMouseEnter:t=>t.currentTarget.classList.add("bg-light"),onMouseLeave:t=>t.currentTarget.classList.remove("bg-light"),children:[e.jsxs("div",{className:"form-check m-0 d-flex align-items-center flex-grow-1 text-truncate",style:{maxWidth:"80%"},children:[e.jsx("input",{className:"form-check-input cursor-pointer mt-0",type:"checkbox",id:`todoCheck${n.todoNo}`,checked:n.todoStatus==="Y",onChange:()=>D(n)}),S===n.todoNo?e.jsxs("div",{className:"d-flex ms-2 w-100 align-items-center",children:[e.jsx("input",{type:"text",ref:y,className:"form-control form-control-sm me-2",value:a,onChange:t=>f(t.target.value),onKeyDown:t=>{t.key==="Enter"&&R(),t.key==="Escape"&&s(null)}}),e.jsx("button",{className:"btn btn-sm btn-success me-1 text-nowrap",onClick:R,children:"Ï†ÄÏû•"}),e.jsx("button",{className:"btn btn-sm btn-secondary text-nowrap",onClick:()=>s(null),children:"Ï∑®ÏÜå"})]}):e.jsx("label",{className:`form-check-label ms-2 cursor-pointer text-truncate ${n.todoStatus==="Y"?"text-decoration-line-through text-muted":""}`,htmlFor:`todoCheck${n.todoNo}`,onDoubleClick:()=>A(n),style:{fontSize:"0.9rem",width:"100%"},title:n.todoContent,children:n.todoContent})]}),S!==n.todoNo&&e.jsxs("div",{className:"btn-group btn-group-sm opacity-50 group-hover-visible transition-opacity ms-auto",children:[e.jsx("button",{type:"button",className:"btn btn-link text-secondary p-0 me-2",onClick:()=>A(n),title:"ÏàòÏ†ï",children:e.jsx("i",{className:"bi bi-pencil-square"})}),e.jsx("button",{type:"button",className:"btn btn-link text-danger p-0",onClick:()=>E(n.todoNo),title:"ÏÇ≠Ï†ú",children:e.jsx("i",{className:"bi bi-trash"})})]})]},n.todoNo))})})]})]})},F=()=>{const[i,c]=r.useState([]);return r.useEffect(()=>{k.get("/tudio/dashboard/survey/pending").then(m=>{Array.isArray(m.data)?c(m.data):c([])}).catch(m=>{console.error("ÏÑ§Î¨∏ Î°úÎìú Ïã§Ìå®",m),c([])})},[]),!i||i.length===0?null:e.jsxs("div",{className:"alert alert-primary d-flex align-items-center justify-content-between mb-4 shadow-sm border-0",role:"alert",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"bi bi-clipboard-check-fill fs-4 me-3 text-primary"}),e.jsxs("div",{children:[e.jsxs("strong",{children:["ÎØ∏Ï∞∏Ïó¨ ÏÑ§Î¨∏Ïù¥ ",i.length,"Í±¥ ÏûàÏäµÎãàÎã§!"]}),e.jsx("div",{className:"small text-muted",children:"ÏÜåÏ§ëÌïú ÏùòÍ≤¨ÏùÑ ÎÇ®Í≤®Ï£ºÏÑ∏Ïöî."})]})]}),e.jsx("div",{className:"d-flex gap-2",children:(i||[]).slice(0,2).map(m=>e.jsxs(M,{to:`/tudio/survey/detail/${m.surveyNo}`,className:"btn btn-sm btn-light text-primary fw-bold border",children:[m.surveyTitle," ",e.jsx("i",{className:"bi bi-arrow-right ms-1"})]},m.surveyNo))})]})},J=({refreshTrigger:i})=>{const[c,m]=r.useState([]),[h,p]=r.useState(!0),j=()=>{k.get("/tudio/dashboard/notice").then(l=>{m(l.data||[])}).catch(l=>console.error("Í≥µÏßÄÏÇ¨Ìï≠ Î°úÎìú Ïã§Ìå®",l)).finally(()=>p(!1))};return r.useEffect(()=>{j()},[]),r.useEffect(()=>{i>0&&(console.log("‚ôªÔ∏è [Í≥µÏßÄÏÇ¨Ìï≠] Í∞±Ïã† Ïã†Ìò∏ ÏàòÏã† -> Ïû¨Ï°∞Ìöå"),j())},[i]),h?e.jsx("div",{className:"text-center py-4",children:e.jsx("span",{className:"spinner-border spinner-border-sm text-warning"})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"widget-content",style:{height:"100%",width:"100%",overflow:"hidden"},children:[e.jsxs("div",{className:"p-3 border-bottom d-flex justify-content-between align-items-center",children:[e.jsxs("h6",{className:"fw-bold m-0",children:[e.jsx("i",{className:"bi bi-megaphone-fill me-2 text-warning"}),"ÏãúÏä§ÌÖú Í≥µÏßÄÏÇ¨Ìï≠"]}),e.jsx(M,{to:"/board/notice",className:"text-muted small text-decoration-none",title:"ÎçîÎ≥¥Í∏∞",children:e.jsx("i",{className:"bi bi-plus-lg"})})]}),e.jsx("div",{className:"flex-grow-1 overflow-auto custom-scrollbar p-0",style:{minHeight:0},children:c.length===0?e.jsx("div",{className:"d-flex align-items-center justify-content-center h-100 text-muted small",children:"Îì±Î°ùÎêú Í≥µÏßÄÏÇ¨Ìï≠Ïù¥ ÏóÜÏäµÎãàÎã§."}):e.jsx("ul",{className:"list-group list-group-flush",children:c.map(l=>e.jsxs("li",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center px-3 py-3 border-bottom",children:[e.jsxs("div",{className:"text-truncate d-flex align-items-center",style:{maxWidth:"75%"},children:[l.noticeFixStatus==="Y"&&e.jsx("i",{className:"bi bi-pin-angle-fill text-danger me-2 small"}),e.jsx("span",{className:"text-dark small fw-bold text-truncate",children:l.noticeTitle})]}),e.jsx("small",{className:"text-muted",style:{fontSize:"0.75rem",flexShrink:0},children:l.noticeRegdate?new Date(l.noticeRegdate).toLocaleDateString():"-"})]},l.noticeNo))})})]})})},G=({refreshTrigger:i})=>{const[c,m]=r.useState([]),[h,p]=r.useState(!0),j=()=>{k.get("/tudio/dashboard/deadlineWork").then(o=>{console.log("ÎßàÍ∞êÏûÑÎ∞ï Îç∞Ïù¥ÌÑ∞ ÌôïÏù∏:",o.data),m(o.data||[])}).catch(o=>console.error("ÎßàÍ∞êÏûÑÎ∞ï Î°úÎìú Ïã§Ìå®",o)).finally(()=>p(!1))};if(r.useEffect(()=>{j()},[]),r.useEffect(()=>{i>0&&(console.log("‚ôªÔ∏è [ÎßàÍ∞êÏûÑÎ∞ï] Í∞±Ïã† Ïã†Ìò∏ ÏàòÏã† -> Ïû¨Ï°∞Ìöå"),j())},[i]),h)return e.jsx("div",{className:"text-center py-4",children:e.jsx("span",{className:"spinner-border spinner-border-sm text-danger"})});const l=o=>o<0?e.jsxs("span",{className:"badge bg-danger rounded-pill",children:["D+",Math.abs(o)]}):o===0?e.jsx("span",{className:"badge bg-danger rounded-pill",children:"D-Day"}):e.jsxs("span",{className:"badge bg-warning text-dark rounded-pill",children:["D-",o]}),v=o=>{window.location.href=`tudio/project/detail?projectNo=${o}`};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"widget-content",children:[e.jsxs("div",{className:"p-3 border-bottom d-flex justify-content-between align-items-center",children:[e.jsxs("h6",{className:"fw-bold m-0 text-dark",children:[e.jsx("i",{className:"bi bi-stopwatch-fill me-2"}),"ÎßàÍ∞ê ÏûÑÎ∞ï ÏóÖÎ¨¥"]}),e.jsxs("span",{className:"badge bg-danger rounded-pill",children:[c.length,"Í±¥"]})]}),e.jsx("div",{className:"flex-grow-1 overflow-auto custom-scrollbar p-0",style:{minHeight:0},children:h?e.jsx("div",{className:"text-center py-5",children:e.jsx("span",{className:"spinner-border spinner-border-sm text-danger"})}):e.jsx("ul",{className:"list-group list-group-flush",children:c.length===0?e.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center h-100 text-muted small py-5",children:[e.jsx("i",{className:"bi bi-check-circle fs-4 mb-2 text-success"}),e.jsx("span",{children:"ÎßàÍ∞ê ÏûÑÎ∞ïÌïú ÏóÖÎ¨¥Í∞Ä ÏóÜÏäµÎãàÎã§."})]}):c.map((o,w)=>e.jsxs("li",{className:"list-group-item list-group-item-action px-3 py-3",children:[e.jsxs("div",{className:"text-muted mb-1 d-flex align-items-center",style:{fontSize:"0.75rem"},children:[e.jsx("i",{className:"bi bi-folder2-open me-1"}),e.jsx("span",{className:"text-truncate",onClick:()=>v(o.projectNo),style:{cursor:"pointer"},children:o.projectName})]}),e.jsxs("div",{className:"d-flex align-items-center w-100 gap-2",children:[e.jsx("div",{className:"fw-bold text-dark text-truncate",style:{flex:"0 0 35%",fontSize:"0.9rem"},title:o.taskTitle,children:o.taskTitle}),e.jsxs("div",{className:"d-flex align-items-center",style:{flex:"1 1 auto",minWidth:0},children:[e.jsx("div",{className:"progress w-100",style:{height:"6px",backgroundColor:"#e9ecef",borderRadius:"3px"},children:e.jsx("div",{className:`progress-bar ${o.taskDday<0?"bg-danger":"bg-warning"}`,style:{width:`${o.taskRate}%`}})}),e.jsxs("small",{className:"ms-2 fw-bold text-secondary",style:{fontSize:"0.75rem",minWidth:"30px",textAlign:"right"},children:[o.taskRate,"%"]})]}),e.jsx("div",{className:"d-flex justify-content-end",style:{flex:"0 0 auto"},children:l(o.taskDday)})]})]},w))})})]})})},q=()=>{const[i,c]=r.useState([]),[m,h]=r.useState([]),[p,j]=r.useState(!1),l=r.useRef(null),[v,o]=r.useState(0),[w,S]=r.useState({PERSONAL_WORK:0,DRAFT:0,ALARM:0,PROJECT_BOOKMARK:0,TODO:0,NOTICE:0,PROJECT_SUMMARY:0}),s=document.body.dataset.contextPath||"",a=document.body.dataset.loginNo?parseInt(document.body.dataset.loginNo,10):0;r.useEffect(()=>{const t=document.getElementById("mainContent");if(t)return p?t.classList.add("dashboard-edit-mode"):t.classList.remove("dashboard-edit-mode"),()=>t.classList.remove("dashboard-edit-mode")},[p]),r.useEffect(()=>{(async()=>{try{const u=await k.get("/tudio/dashboard/layout"),g=Array.isArray(u.data)?u.data:[];c(g.filter(x=>x.widgetStatus==="Y")),h(g.filter(x=>x.widgetStatus==="N"))}catch(u){console.error("Layout fetch error",u)}})()},[]),r.useEffect(()=>{if(i.length===0)return;const t=document.querySelector(".grid-stack");if(!t||l.current)return;console.log("Grid Container Width:",t.offsetWidth);const u=P.init({column:12,cellHeight:100,margin:10,disableOneColumnMode:!0,animate:!0,float:!1,staticGrid:!p,removable:!1,children:!1,minRow:5},t);return l.current=u,()=>{u&&(u.destroy(!1),l.current=null)}},[i]),r.useEffect(()=>{l.current&&(l.current.setStatic(!p),p&&setTimeout(()=>{window.dispatchEvent(new Event("resize")),console.log("Triggered window resize for GridStack")},320))},[p]);const f=(t,u)=>{t.dataTransfer.setData("widget-data",JSON.stringify(u)),t.dataTransfer.effectAllowed="copy",document.body.style.cursor="grabbing"},b=()=>{document.body.style.cursor="auto",document.querySelector(".grid-stack")?.classList.remove("drag-over")},y=t=>{t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect="copy",t.currentTarget.classList.add("drag-over")},d=t=>{t.preventDefault(),t.currentTarget.classList.remove("drag-over"),document.body.style.cursor="auto";const u=t.dataTransfer.getData("widget-data");if(!u)return;const g=JSON.parse(u);h(x=>x.filter(C=>String(C.widgetNo)!==String(g.widgetNo))),c(x=>x.some(C=>String(C.widgetNo)===String(g.widgetNo))?x:[...x,{...g,x:0,y:0,widgetStatus:"Y",autoPosition:!0}])},N=r.useCallback(t=>{j(t)},[]),D=t=>{c(u=>{const g=u.find(x=>x.widgetNo==t);return g?(h(x=>[...x,{...g,x:0,y:0,widgetStatus:"N"}]),u.filter(x=>x.widgetNo!=t)):u})},E=async()=>{if(!l.current)return;const u=l.current.save(!1).map(x=>({widgetNo:x.id,x:x.x,y:x.y,width:x.w,height:x.h,widgetStatus:"Y"})),g=m.map(x=>({widgetNo:x.widgetNo,x:0,y:0,width:x.width,height:x.height,widgetStatus:"N"}));try{await k.post("/tudio/dashboard/layout/save",[...u,...g]),T.fire({icon:"success",title:"Ï†ÄÏû• ÏôÑÎ£å",text:"Î†àÏù¥ÏïÑÏõÉÏù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.",timer:1500,showConfirmButton:!1}),N(!1)}catch{T.fire("Ïò§Î•ò","Ï†ÄÏû• Ïã§Ìå®","error")}};r.useEffect(()=>{if(!a)return;const t=new z(`${s}/ws-stomp`),u=B.over(t);return u.debug=null,u.connect({},()=>{console.log(`‚úÖ WebSocket Connected (Member: ${a})`),u.subscribe(`/sub/dashboard/${a}`,g=>{const C=JSON.parse(g.body).type;C&&w.hasOwnProperty(C)&&(console.log(`‚ôªÔ∏è [${C}] ÏúÑÏ†Ø Í∞±Ïã† Ïã†Ìò∏ ÏàòÏã†`),S(O=>({...O,[C]:O[C]+1})))})}),()=>{u&&u.disconnect()}},[s,a]);const A=t=>n[t]?.title||"ÏúÑÏ†Ø",R=t=>n[t]?.icon||"bi-grid",n=r.useMemo(()=>({PERSONAL_WORK:{component:e.jsx(Y,{refreshTrigger:w.PERSONAL_WORK}),title:"Í∞úÏù∏ ÏóÖÎ¨¥",icon:"bi-calendar-week"},DRAFT:{component:e.jsx(I,{refreshTrigger:w.DRAFT}),title:"Ï†ÑÏûêÍ≤∞Ïû¨",icon:"bi-file-earmark-text"},ALARM:{component:e.jsx(K,{refreshTrigger:w.ALARM}),title:"ÎØ∏ÌôïÏù∏ ÏïåÎ¶º",icon:"bi-bell-fill"},PROJECT_BOOKMARK:{component:e.jsx(_,{onProjectSelect:o,refreshTrigger:w.PROJECT_BOOKMARK}),title:"Î∂ÅÎßàÌÅ¨ ÌîÑÎ°úÏ†ùÌä∏",icon:"bi-bookmark-star-fill"},TODO:{component:e.jsx(U,{projectNo:v,refreshTrigger:w.TODO}),title:"To Do List",icon:"bi-check2-square"},NOTICE:{component:e.jsx(J,{refreshTrigger:w.NOTICE}),title:"ÏãúÏä§ÌÖú Í≥µÏßÄÏÇ¨Ìï≠",icon:"bi-megaphone-fill"},PROJECT_SUMMARY:{component:e.jsx(G,{refreshTrigger:w.PROJECT_SUMMARY}),title:"ÎßàÍ∞ê ÏûÑÎ∞ï ÏóÖÎ¨¥",icon:"bi-stopwatch"}}),[v,w]);return e.jsxs("div",{className:"dashboard-container",children:[e.jsx("svg",{width:"0",height:"0",style:{position:"absolute",visibility:"hidden",pointerEvents:"none"},children:e.jsx("defs",{children:e.jsxs("filter",{id:"filter-svg",children:[e.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"5",result:"blur"}),e.jsx("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9",result:"goo"}),e.jsx("feComposite",{in:"SourceGraphic",in2:"goo",operator:"atop"})]})})}),e.jsxs("div",{className:"dashboard-content-wrapper",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3 px-4 pt-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"fw-bold text-primary-dark mb-2",style:{color:"#00407F"},children:"ÎåÄÏãúÎ≥¥Îìú"}),e.jsx("p",{className:"text-muted small m-0",children:"TudioÏôÄ Ìï®Íªò ÌôúÍ∏∞Ï∞®Í≤å ÏóÖÎ¨¥Î•º ÏãúÏûëÌï¥Î≥¥ÏÑ∏Ïöî !"})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("div",{className:"bg-white rounded-pill px-3 py-2 d-flex align-items-center border shadow-sm gap-3",children:e.jsxs("div",{className:"form-check form-switch m-0",children:[e.jsx("input",{className:"form-check-input cursor-pointer",type:"checkbox",id:"editModeSwitch",checked:p,onChange:t=>N(t.target.checked)}),e.jsx("label",{className:"form-check-label small fw-bold ms-2 cursor-pointer",htmlFor:"editModeSwitch",children:"ÏúÑÏ†Ø Ìé∏Ïßë"})]})}),p&&e.jsxs("button",{className:"btn btn-sm btn-primary rounded-pill px-3 py-2 fw-bold shadow-sm",onClick:E,children:[e.jsx("i",{className:"bi bi-check-lg me-1"})," Ï†ÄÏû•"]})]})]}),e.jsx("div",{className:"px-4",children:e.jsx(F,{})}),e.jsx("div",{className:"main-content-wrapper px-4",children:e.jsx("div",{className:"grid-stack",style:{minHeight:"600px"},onDragOver:p?y:void 0,onDrop:p?d:void 0,children:i.map(t=>e.jsx("div",{className:"grid-stack-item","gs-id":t.widgetNo,"gs-x":t.x,"gs-y":t.y,"gs-w":t.width,"gs-h":t.height,"gs-auto-position":t.autoPosition?"true":void 0,"data-type":t.widgetType,children:e.jsxs("div",{className:"grid-stack-item-content",children:[p&&e.jsx("div",{className:"btn-close-widget",onClick:()=>D(t.widgetNo),children:e.jsx("i",{className:"bi bi-x-lg"})}),n[t.widgetType]?.component]})},t.widgetNo))})})]}),e.jsxs("div",{className:`widget-drawer ${p?"open":""}`,children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 p-3",children:[e.jsxs("h5",{className:"fw-bold m-0",children:[e.jsx("i",{className:"bi bi-box-seam me-2"})," ÏúÑÏ†Ø Î≥¥Í¥ÄÌï®"]}),e.jsx("button",{className:"btn-close",onClick:()=>N(!1)})]}),e.jsx("div",{id:"sidebar-content",className:"px-3 pb-3 h-100 overflow-auto",children:m.map(t=>e.jsx("div",{className:"sidebar-widget-item mb-3 cursor-grab","gs-id":t.widgetNo,"gs-w":t.width,"gs-h":t.height,"data-type":t.widgetType,draggable:!0,onDragStart:u=>f(u,t),onDragEnd:b,style:{cursor:"grab"},children:e.jsxs("div",{className:"grid-stack-item-content w-100",style:{pointerEvents:"none"},children:[e.jsxs("span",{className:"fw-bold text-dark small",children:[e.jsx("i",{className:`bi ${R(t.widgetType)} me-2 text-primary`}),A(t.widgetType)]}),e.jsx("i",{className:"bi bi-grip-vertical text-muted"})]})},t.widgetNo))})]})]})};export{q as D};
